function getBlog(){
	return blog = {"content": "# 【微服务—kong】负载均衡及健康检查\n## 负载均衡\nkong内置的负载均衡器使用了加权轮询算法。\nupstream中有一个slots字段，默认值为10000，slots必须大于target的数量乘以100，并且必须大于所有target的weight之和。\ntarget中的有一个weight字段，默认值为100，可以将weight占slots的比重粗略视为当前target的权重，weight越大，权重也就越高，当weigth等于0的时候，这个target将不会参与负载均衡过程，也就是说所有请求都不会被代理到当前target中。\n\n## 健康检查\nkong提供两种健康检查方式，消极的健康检查和积极的健康检查\n* 消极的健康检查：也就是熔断器，当错误次数达到瓶颈时，kong会将当前target标记为不健康的状态，之后负载均衡器将会跳过这个target，也就是说所有请求都不会被代理到当前target中，如果在未来的某个时间，当前target的问题被修复了，kong不会自动将它标记为健康的状态，而是需要kong管理员手动调用接口（POST upstreams/my_upstream/targets/1.2.3.4:1234/healthy）来将这个target的状态改为健康\n* 积极的健康检查：kong会不停的向target所指向的后端服务器发送心跳，来探测当前target是否健康，当错误次数达到瓶颈时，kong会将当前target标记为不健康的状态，当达到正常次数后，kong也会自动将当前target标记为健康的状态\n\n### 开启健康检查\n可以通过修改upstream中的healthchecks字段下的的默认值来开启健康检查\n#### 开启积极的健康检查需要指定的字段\n```\n# 被视为探测失败的状态码\nhealthchecks.active.unhealthy.http_statuses\n# 被视为不健康的http探测失败次数瓶颈\nhealthchecks.active.unhealthy.http_failures\n# 被视为不健康的tcp探测失败次数瓶颈\nhealthchecks.active.unhealthy.tcp_failures\n# 对不健康的target发送探测心跳的时间间隔\nhealthchecks.active.unhealthy.interval\n# 对不健康的target发送探测心跳的超时时间，若超时，则表示当前不健康的target还是不健康的\nhealthchecks.active.unhealthy.timeouts\n# 被视为探测成功的状态码\nhealthchecks.active.healthy.http_statuses\n# 对健康的target发送探测心跳的时间间隔\nhealthchecks.active.healthy.interval\n# 被视为健康的探测成功次数瓶颈\nhealthchecks.active.healthy.successes\n# 同时进行探测的target数量\nhealthchecks.active.concurrency\n# 用于探测的target路径\nhealthchecks.active.http_path\n# 发送探测请求的超时时间\nhealthchecks.active.timeout\n```\n\n#### 开启消极的健康检查需要指定的字段\n```\n# 被视为请求成功的状态码\nhealthchecks.passive.healthy.http_statuses\n# 被视为健康的请求成功次数瓶颈\nhealthchecks.passive.healthy.successes\n# 被视为请求失败的状态码\nhealthchecks.passive.unhealthy.http_statuses\n# 被视为不健康的http请求失败次数瓶颈\nhealthchecks.passive.unhealthy.http_failures\n# 被视为不健康的tcp请求失败次数瓶颈\nhealthchecks.passive.unhealthy.tcp_failures\n# 请求的超时时间，若超时，则表示当前请求也是失败的\nhealthchecks.passive.unhealthy.timeouts\n```\n\n#### 对于消极的健康检查和开启积极的健康检查，可以只开启其中一个，也可以同时开启，同时开启的话，消极的健康检查主要用于判定一个target是否健康，并将不健康的target的状态改为不健康，而积极的健康检查主要用于去探测一个不健康的target是否健康，并将已经恢复健康的target的状态改为健康。\n\n### 关闭健康检查\n默认情况下，健康检查就是关闭的。若想关闭那些已经开启健康检查的upstream，那么进行以下操作\n#### 关闭积极的健康检查\n将upstream的healthchecks字段下的healthchecks.active.healthy.interval和healthchecks.active.unhealthy.interval这两个的值设为0即可\n\n#### 关闭消极的健康检查\n将upstream的healthchecks字段的healthchecks.passive下面的所有跟计数相关的，也就是数字类型的值都设为0即可\n\n### 注意：健康检查在数据库中必须要有默认值，不能为null，不然会导致其内部的负载均衡器出问题，进而会出现反向代理报错的情况", "title": "【微服务—kong】负载均衡及健康检查"}
}